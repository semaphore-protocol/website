"use strict";(self.webpackChunk_semaphore_protocol_website=self.webpackChunk_semaphore_protocol_website||[]).push([[768],{3905:(e,a,r)=>{r.d(a,{Zo:()=>m,kt:()=>g});var t=r(7294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=t.createContext({}),s=function(e){var a=t.useContext(p),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},m=function(e){var a=s(e.components);return t.createElement(p.Provider,{value:a},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=s(r),d=n,g=u["".concat(p,".").concat(d)]||u[d]||c[d]||o;return r?t.createElement(g,i(i({ref:a},m),{},{components:r})):t.createElement(g,i({ref:a},m))}));function g(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var p in a)hasOwnProperty.call(a,p)&&(l[p]=a[p]);l.originalType=e,l[u]="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5162:(e,a,r)=>{r.d(a,{Z:()=>i});var t=r(7294),n=r(6010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:a,hidden:r,className:i}=e;return t.createElement("div",{role:"tabpanel",className:(0,n.Z)(o.tabItem,i),hidden:r},a)}},5488:(e,a,r)=>{r.d(a,{Z:()=>c});var t=r(7462),n=r(7294),o=r(6010),i=r(2389),l=r(7392),p=r(7094),s=r(2466);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function u(e){const{lazy:a,block:r,defaultValue:i,values:u,groupId:c,className:d}=e,g=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=u??g.map((e=>{let{props:{value:a,label:r,attributes:t}}=e;return{value:a,label:r,attributes:t}})),k=(0,l.l)(b,((e,a)=>e.value===a.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const h=null===i?i:i??g.find((e=>e.props.default))?.props.value??g[0].props.value;if(null!==h&&!b.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:v}=(0,p.U)(),[N,y]=(0,n.useState)(h),C=[],{blockElementScrollPositionUntilNextRender:w}=(0,s.o5)();if(null!=c){const e=f[c];null!=e&&e!==N&&b.some((a=>a.value===e))&&y(e)}const T=e=>{const a=e.currentTarget,r=C.indexOf(a),t=b[r].value;t!==N&&(w(a),y(t),null!=c&&v(c,String(t)))},x=e=>{let a=null;switch(e.key){case"Enter":T(e);break;case"ArrowRight":{const r=C.indexOf(e.currentTarget)+1;a=C[r]??C[0];break}case"ArrowLeft":{const r=C.indexOf(e.currentTarget)-1;a=C[r]??C[C.length-1];break}}a?.focus()};return n.createElement("div",{className:(0,o.Z)("tabs-container",m.tabList)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":r},d)},b.map((e=>{let{value:a,label:r,attributes:i}=e;return n.createElement("li",(0,t.Z)({role:"tab",tabIndex:N===a?0:-1,"aria-selected":N===a,key:a,ref:e=>C.push(e),onKeyDown:x,onClick:T},i,{className:(0,o.Z)("tabs__item",m.tabItem,i?.className,{"tabs__item--active":N===a})}),r??a)}))),a?(0,n.cloneElement)(g.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},g.map(((e,a)=>(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==N})))))}function c(e){const a=(0,i.Z)();return n.createElement(u,(0,t.Z)({key:String(a)},e))}},2841:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>u});var t=r(7462),n=(r(7294),r(3905)),o=r(5488),i=r(5162);const l={sidebar_position:2,title:"Grupos"},p="Gupos Semaphore",s={unversionedId:"guides/groups",id:"version-V3/guides/groups",title:"Grupos",description:"Un grupo Semaphore contiene los identity commitments (compromisos de identidad) de miembros del grupo.",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-V3/guides/groups.mdx",sourceDirName:"guides",slug:"/guides/groups",permalink:"/es/docs/guides/groups",draft:!1,editUrl:"https://github.com/semaphore-protocol/website/edit/main/versioned_docs/version-V3/guides/groups.mdx",tags:[],version:"V3",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Grupos"},sidebar:"version-V3/mySidebar",previous:{title:"Identidades",permalink:"/es/docs/guides/identities"},next:{title:"Pruebas",permalink:"/es/docs/guides/proofs"}},m={},u=[{value:"Grupos off-chain (externos a la cadena)",id:"grupos-off-chain-externos-a-la-cadena",level:2},{value:"Crear un grupo",id:"crear-un-grupo",level:3},{value:"Instalar librer\xeda:",id:"instalar-librer\xeda",level:4},{value:"A\xf1adir miembros",id:"a\xf1adir-miembros",level:3},{value:"Remover o actualizar miembros",id:"remover-o-actualizar-miembros",level:3},{value:"Grupos on-chain",id:"grupos-on-chain",level:2}],c={toc:u},d="wrapper";function g(e){let{components:a,...r}=e;return(0,n.kt)(d,(0,t.Z)({},c,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"gupos-semaphore"},"Gupos Semaphore"),(0,n.kt)("p",null,"Un ",(0,n.kt)("a",{parentName:"p",href:"/docs/glossary/#semaphore-group"},"grupo Semaphore")," contiene los ",(0,n.kt)("a",{parentName:"p",href:"/docs/glossary/#identity-commitment"},"identity commitments")," (compromisos de identidad) de miembros del grupo.\nEstos son algunos ejemplos de uso de los grupos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Encuesta con preguntas a la que se unen las personas que acudieron a un evento para calificarlo,"),(0,n.kt)("li",{parentName:"ul"},"votaci\xf3n a la que se unen los miembros para votar por una propuesta,"),(0,n.kt)("li",{parentName:"ul"},"Denunciantes que est\xe1n verificados como empleados de una organizaci\xf3n.")),(0,n.kt)("p",null,"Un grupo Semaphore es un ",(0,n.kt)("a",{parentName:"p",href:"/docs/glossary/#incremental-merkle-tree"},"\xe1rbol de Merkle incremental"),", y los miembros del grupo (por ejemplo, ",(0,n.kt)("a",{parentName:"p",href:"/docs/glossary/#identity-commitments"},"identity commitments"),") son las hojas del \xe1rbol.\nLos grupos Semaphore determinan los siguientes tres par\xe1metro:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Group id"),": un identificador \xfanico para el grupo;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Tree depth"),": el n\xfamero m\xe1ximo de miembros que puede contener un grupo (",(0,n.kt)("inlineCode",{parentName:"li"},"max size = 2 ^ tree depth"),");"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Members")," la lista de miembros para inicializar el grupo.")),(0,n.kt)("p",null,"Aprenda c\xf3mo trabajar con grupos."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#off-chain-groups"},(0,n.kt)("strong",{parentName:"a"},"Grupos off-chain"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#on-chain-groups"},(0,n.kt)("strong",{parentName:"a"},"Grupos on-chain")))),(0,n.kt)("h2",{id:"grupos-off-chain-externos-a-la-cadena"},"Grupos off-chain (externos a la cadena)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-a-group"},"Crear un grupo")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#add-members"},"A\xf1adir miembros")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#remove-or-update-members"},"Remover o actualizar miembros"))),(0,n.kt)("h3",{id:"crear-un-grupo"},"Crear un grupo"),(0,n.kt)("p",null,"Utilice la clase ",(0,n.kt)("inlineCode",{parentName:"p"},"Group")," de la librer\xeda ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/blob/main/packages/group"},(0,n.kt)("inlineCode",{parentName:"a"},"@semaphore-protocol/group"))," para crear un grupo off-chain con los siguientes par\xe1metros:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Group id"),": un identificar \xfanico para el grupo;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Tree depth"),": (",(0,n.kt)("em",{parentName:"li"},"default ",(0,n.kt)("inlineCode",{parentName:"em"},"20")),") el n\xfamero m\xe1ximo de usuarios que puede contener un grupo, el valor por defecto es 20 (",(0,n.kt)("inlineCode",{parentName:"li"},"max size = 2 ^ tree depth"),")."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Members"),": (",(0,n.kt)("em",{parentName:"li"},"default ",(0,n.kt)("inlineCode",{parentName:"em"},"[]")),") la lista de miembros para inicializar el grupo.")),(0,n.kt)("h4",{id:"instalar-librer\xeda"},"Instalar librer\xeda:"),(0,n.kt)(o.Z,{defaultValue:"npm",groupId:"package-managers",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"},{label:"pnpm",value:"pnpm"}],mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @semaphore-protocol/group\n"))),(0,n.kt)(i.Z,{value:"yarn",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @semaphore-protocol/group\n"))),(0,n.kt)(i.Z,{value:"pnpm",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add @semaphore-protocol/group\n")))),(0,n.kt)("p",null,"Para crear un grupo con el n\xfamero de usuarios que aparece por defecto (20) ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"em"},"treeDepth")),", llame la funci\xf3n para construir un ",(0,n.kt)("inlineCode",{parentName:"p"},"Group")," sin el segundo par\xe1metro. Por ejemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import { Group } from "@semaphore-protocol/group"\n\nconst group = new Group(1)\n')),(0,n.kt)("p",null,"El siguiente c\xf3digo de ejemplo pasa por ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"em"},"treeDepth"))," para crear un grupo para ",(0,n.kt)("inlineCode",{parentName:"p"},"2 ^ 30 = 1073741824")," miembros:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import { Group } from "@semaphore-protocol/group"\n\nconst group = new Group(1, 30)\n')),(0,n.kt)("p",null,"Tambi\xe9n puede inicializar un grupo con varios miembros pasando la lista de identity commitments (miembros) como tercer par\xe1metro al crear el grupo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import { Group } from "@semaphore-protocol/group"\n\nconst members = [\n  "11237622825477336339577122413451117718539783476837539122310492284566644730311",\n  "9332663527862709610616009715800254142772436825222910251631161087138559093425",\n  "13255821893820536903335282929376140649646180444238593676033702344407594536519"\n]\nconst group = new Group(1, 20, members)\n')),(0,n.kt)("h3",{id:"a\xf1adir-miembros"},"A\xf1adir miembros"),(0,n.kt)("p",null,"Utiliza la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"Group addMember"),' para a\xf1adir un miembro (es decir su "identity commitment") a un grupo. Por ejemplo:'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"group.addMember(identityCommitment)\n")),(0,n.kt)("p",null,"Para a\xf1adir un lote de miembros a un grupo, pasa una selecci\xf3n por la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"Group addMembers"),". Por ejemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"group.addMembers([identityCommitment1, identityCommitment2])\n")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Cuando utiliza la misma identidad Semaphore en varios grupos, si un atacante toma control de esa identidad, todos los grupos de los que forma parte estar\xe1n comprometidos. Considere utilizar identidades diferentes para cada grupo.")),(0,n.kt)("h3",{id:"remover-o-actualizar-miembros"},"Remover o actualizar miembros"),(0,n.kt)("p",null,"Para remover miembros de un equipo, pasa el \xedndice del miembro por la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"Group removeMember"),". Por ejemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"group.removeMember(0)\n")),(0,n.kt)("p",null,"Para actualizar los miembros dentro de un grupo, pasa el \xedndice del miembro y el nuevo valor por la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"Group updateMember"),". Por ejemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"group.updateMember(0, 2)\n")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Remover a un miembro de un grupo configura el valor del nodo a un valor especial (ejemplo, ",(0,n.kt)("inlineCode",{parentName:"p"},"zeroValue"),").\nDado que ese nodo no se remueve y el largo de la selecci\xf3n de ",(0,n.kt)("inlineCode",{parentName:"p"},"group.members")," no cambia.")),(0,n.kt)("h2",{id:"grupos-on-chain"},"Grupos on-chain"),(0,n.kt)("p",null,"El contrato ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/blob/main/packages/contracts/contracts/base/SemaphoreGroups.sol"},(0,n.kt)("inlineCode",{parentName:"a"},"SemaphoreGroups"))," utiliza la librer\xeda del ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/privacy-scaling-explorations/zk-kit/blob/main/packages/incremental-merkle-tree.sol/contracts/IncrementalBinaryTree.sol"},(0,n.kt)("inlineCode",{parentName:"a"},"IncrementalBinaryTree"))," (\xe1rbol binario incremental) y provee m\xe9todos para crear y administrar grupos."),(0,n.kt)("admonition",{title:"rmaci\xf3n",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"puede importar el contrato ",(0,n.kt)("inlineCode",{parentName:"p"},"SemaphoreGroups.sol")," y otros contratos Semaphore del m\xf3dulo NPM ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/tree/main/packages/contracts"},(0,n.kt)("inlineCode",{parentName:"a"},"@semaphore-protocol/contracts")),".")),(0,n.kt)("p",null,"Alternativamente, puede utilizar un contrato ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/blob/main/packages/contracts/contracts/Semaphore.sol"},(0,n.kt)("inlineCode",{parentName:"a"},"Semaphore.sol"))," ya desplegado y utilizar sus funciones externas para grupos."),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("inlineCode",{parentName:"p"},"Semaphore.sol")," no revisa si un miembro con un identity commitment en espec\xedfico ya existe en un grupo. Esta revisi\xf3n se debe realizar off-chain.")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("inlineCode",{parentName:"p"},"Semaphore.sol")," incluye un mecanismo para verificar pruebas Semaphore creadas con ra\xedces de \xe1rboles de Merkle antiguas. La duraci\xf3n de este mecanismo puede ser definido por el admin en la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"createGroup"),". Por lo tanto, los miembros de un grupo pueden continuar generando pruebas v\xe1lidas incluso despu\xe9s de ser removidos. Para m\xe1s informaci\xf3n ver el issue ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/issues/98"},"#98"),".")))}g.isMDXComponent=!0}}]);